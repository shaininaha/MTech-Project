package rastovec;

import org.gdal.gdal.*;
import org.gdal.gdalconst.*;
import org.gdal.ogr.*;
import org.gdal.osr.*;
        

/**
 *
 * @author group 6
 */
public class RasToVec {

    /**
     
     */
    public static void main(String[] args) {
        // TODO code application logic here
        String inputsrc = "H:\\Test\\DIP_DATA\\lis3march99i.tif";
        String output = "H:\\Test\\doo23.shp";
        
        gdal.AllRegister();
        Dataset ds = gdal.Open(inputsrc);
        String st= ds.GetProjection();
        System.out.println(ds);
//        Dataset shp = gdal.Open("F:\\Education\\M. Tech Documents\\Module 2\\python slides\\Shapefiles\\Polygon1.shp");
        ogr.RegisterAll();      
        DataSource dest = ogr.GetDriverByName("ESRI Shapefile").CreateDataSource(output);
        SpatialReference sr = new SpatialReference();
//        osr.GetUserInputAsWKT(ds.GetProjectionRef());
        //sr.ImportFromWkt(ds.GetProjectionRef());
        Layer dst_layer = dest.CreateLayer("Value");
        
        String dst_fldnm = "DN";
//        FieldDefn fd 
        dst_layer.CreateField(new FieldDefn(dst_fldnm,ogr.OFTInteger)); 
        int dst_field = 0;
//        gdal.GetDriverByName("ESRI Shapefile");
        Band b = ds.GetRasterBand(ds.getRasterCount());
//        System.out.println(ds.getRasterCount());
//        System.out.println(ds.GetProjection());
        gdal.Polygonize(b, null, dst_layer, dst_field);
//        int res = gdal.Polygonize(b, null, null, 1);
//        Layer l;
//        l.CreateField(null);
    }
    
}
